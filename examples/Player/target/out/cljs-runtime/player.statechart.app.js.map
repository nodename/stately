{"version":3,"sources":["player/statechart/app.cljs"],"mappings":";AAEA,GAAA,QAAAA,mCAAAC,8CAAAC,kDAAAC;AAAA;AAAA,AAAA,+BAAA,2CAAA,mEAAA,mEAAA,yDAAA,2CAAA,mEAAA,2CAAA,kEAAA,mFAAA,sDAAA,7mBAASC;;AAIT,GAAA,QAAAJ,mCAAAC,8CAAAC,kDAAAG;AAAA;AAAA,AAAA,8BAAA,2CAAA,mEAAA,mEAAA,oEAAA,gDAAA,mFAAA,mEAAA,6DAAA,2CAAA,wDAAA,2EAAA,mFAAA,mEAAA,8DAAA,2CAAA,wDAAA,6EAAA,yDAAA,2CAAA,mEAAA,mCAAA,mEAAA,r1CAASC;;AAOT,sCAAA,oFAAA,IAAA,KAAA,KAAA,KAAA,KAAA,KAAA,KAAA,KAAA,KAAA,KAAA,3KAAKC;AAEL,GAAA,QAAAP,mCAAAC,8CAAAC,kDAAAM;AAAA;AAAA,AAAA,+BAAA,2CAAA,2DAAA,2CAAA,hLAASC,kQAC4B,WACGC;AADH,AAEE,wDAAA,yDAAA,1GAACC,8CAAMD;GAH9C,qEAIqC,WACGA;AADH,AAEE,IAAME,UAAQ,iBAAAC,mBAAI,AAAA,uFAASH;AAAb,AAAA,oBAAAG;AAAAA;;AAAA;;;IACRC,OAAQ,iBACK,mDAAA,WAAAE,9DAACC,jBACDE;AADA,AAAa,uDAAAH,hDAACE,iEAAON;GADrB,AAACG,gBAAMR;AAD1B,AAIE,wDAAA,jDAACI,8CAAMD,4DAAW,iBAAAG,mBAAIC;AAAJ,AAAA,oBAAAD;AAAAA;;AAAA;;;WAV3D,mEAAA,mEAAA,oEAAA,gDAAA,mFAAA,mEAAA,6EAAA,2CAAA,wDAAA,6DAAA,2DAAA,mFAAA,mFAAA,+FAAA,yDAAA,2CAAA,mEAAA,2CAAA,sEAAA,mFAAA,mFAAA","names":["js/player","js/player.statechart","js/player.statechart.app","js/player.statechart.app.player","player.statechart.app/player","js/player.statechart.app.track","player.statechart.app/track","player.statechart.app/volume-levels","js/player.statechart.app.volume","player.statechart.app/volume","db","cljs.core.assoc","current","or__5002__auto__","next","cljs.core/cycle","p1__67074#","cljs.core.drop_while","cljs.core.not_EQ_","cljs.core/second"],"sourcesContent":["(ns player.statechart.app)\n\n(defonce player\n  {:start-state :player/active\n   :states      {:player/active {:components [:track :volume]}}})\n\n(defonce track\n  {:start-state :track/paused\n   :transitions {[:track/paused  :play] {:target :track/playing}\n                 [:track/playing :stop] {:target :track/paused}}\n   :states      {:track/paused  {}\n                 :track/playing {}}})\n\n(def volume-levels [0 10 20 30 40 50 60 70 80 90 100])\n\n(defonce volume\n  {:actions     {:set-initial-volume (fn\n                                       [db]\n                                       (assoc db :volume 100))\n                 :cycle-volume       (fn\n                                       [db]\n                                       (let [current (or (:volume db) 100)\n                                             next    (->> (cycle volume-levels)\n                                                          (drop-while #(not= % current))\n                                                          second)]\n                                         (assoc db :volume (or next 0))))}\n   :start-state :volume/active\n   :transitions {[:volume/active :cycle-volume] {:target  :internal\n                                                 :actions [[:cycle-volume]]}}\n   :states      {:volume/active {:entry-actions [[:set-initial-volume]]}}})\n"]}