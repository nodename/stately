{"version":3,"sources":["player_web/ui/app.cljs"],"mappings":"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","names":["re_frame.core.reg_sub","db","_","player-web.ui.app/small-button-style","var_args","args__5732__auto__","len__5726__auto__","i__5727__auto__","argseq__5733__auto__","cljs.core/IndexedSeq","player-web.ui.app/btn","p__11090","vec__11091","map__11094","cljs.core.nth","cljs.core/--destructure-map","cljs.core.get","seq11087","G__11088","cljs.core/first","cljs.core/next","G__11089","self__5711__auto__","label","event","disabled?","nodename.stately.core/dispatch-transition","player-web.ui.app/app-screen","active","re_frame.core.subscribe","volume","playing?","cljs.core/deref","cljs.core/contains?","vol","or__5002__auto__","muted?","cljs.pprint.pprint","nodename.stately.tree/tree","cljs.core.dissoc","nodename.stately.comms/app-db","cljs.user/show-active-states"],"sourcesContent":["(ns player-web.ui.app\n  (:require [cljs.pprint :refer [pprint]]\n            [re-frame.core :refer [reg-sub subscribe]]\n            [nodename.stately.comms :refer [app-db]]\n            [nodename.stately.core :refer [dispatch-transition]]\n            [nodename.stately.tree :refer [tree]]\n            [cljs.user :refer [show-active-states]]))\n\n(reg-sub :active-states (fn [db _] (:active-states db)))\n(reg-sub :volume        (fn [db _] (:volume db)))\n\n(def small-button-style\n  {:padding      \"4px 10px\"\n   :margin-right \"6px\"\n   :cursor       \"pointer\"\n   :font-size    \"12px\"})\n\n(defn btn\n  [label event & [{:keys [disabled?]}]]\n  [:button {:on-click #(dispatch-transition [event])\n            :disabled disabled?\n            :style    {:padding       \"8px 20px\"\n                       :margin        \"4px\"\n                       :font-size     \"15px\"\n                       :cursor        (if disabled? \"default\" \"pointer\")\n                       :border-radius \"4px\"\n                       :border        \"none\"\n                       :background    (if disabled? \"#ddd\" \"#444\")\n                       :color         (if disabled? \"#aaa\" \"white\")}}\n   label])\n\n(defn app-screen\n  []\n  (let [active (subscribe [:active-states])\n        volume (subscribe [:volume])]\n    (fn\n      []\n      (let [playing? (contains? @active :track/playing)\n            vol      (or @volume 100)\n            muted?   (zero? vol)]\n        [:div {:style {:font-family \"sans-serif\"\n                       :max-width   \"320px\"\n                       :margin      \"60px auto\"\n                       :text-align  \"center\"}}\n         [:h1 \"Player\"]\n\n         [:div {:style {:font-size \"72px\"\n                        :margin    \"16px 0\"\n                        :color     (if playing? \"#1db954\" \"#aaa\")}}\n          (if playing? \"\u25b6\" \"\u23f8\")]\n\n         [:div {:style {:font-size   \"20px\"\n                        :font-weight \"bold\"\n                        :margin      \"8px 0 4px\"\n                        :color       \"#333\"}}\n          (if playing? \"Playing\" \"Paused\")]\n\n         [:div {:style {:font-size     \"14px\"\n                        :color         \"#666\"\n                        :margin-bottom \"24px\"}}\n          (if muted? \"\ud83d\udd07 Muted\" (str \"\ud83d\udd0a Volume: \" vol \"%\"))]\n\n         [:div\n          (if playing?\n            [btn \"Stop\" :stop]\n            [btn \"Play\" :play])\n          [btn (if muted? \"\ud83d\udd07 Muted\" (str \"\ud83d\udd0a \" vol \"% \u25b6\")) :cycle-volume]]\n\n         [:div {:style {:margin-top \"24px\"}}\n          [:button {:style    small-button-style\n                    :on-click #(pprint (tree))}\n           \"statechart\"]\n          [:button {:style    small-button-style\n                    :on-click #(pprint (dissoc @app-db :tree :active-states :parents))}\n           \"db\"]\n          [:button {:style    small-button-style\n                    :on-click show-active-states}\n           \"active states\"]]]))))\n"]}