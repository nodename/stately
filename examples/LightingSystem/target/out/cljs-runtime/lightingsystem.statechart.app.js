goog.provide('lightingsystem.statechart.app');
if((typeof lightingsystem !== 'undefined') && (typeof lightingsystem.statechart !== 'undefined') && (typeof lightingsystem.statechart.app !== 'undefined') && (typeof lightingsystem.statechart.app.lighting !== 'undefined')){
} else {
lightingsystem.statechart.app.lighting = new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"actions","actions",-812656882),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"light-on","light-on",1530152303),(function (db){
return cljs.core.assoc.cljs$core$IFn$_invoke$arity$variadic(db,new cljs.core.Keyword(null,"light","light",1918998747),new cljs.core.Keyword(null,"on","on",173873944),cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(null,"brightness","brightness",1067055820),(100)], 0));
}),new cljs.core.Keyword(null,"light-off","light-off",514870178),(function (db){
return cljs.core.assoc.cljs$core$IFn$_invoke$arity$variadic(db,new cljs.core.Keyword(null,"light","light",1918998747),new cljs.core.Keyword(null,"off","off",606440789),cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(null,"brightness","brightness",1067055820),(0)], 0));
}),new cljs.core.Keyword(null,"cycle-brightness","cycle-brightness",-38922817),(function (db){
var levels = new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [(25),(50),(75),(100)], null);
var current = new cljs.core.Keyword(null,"brightness","brightness",1067055820).cljs$core$IFn$_invoke$arity$1(db);
var next = cljs.core.second(cljs.core.drop_while.cljs$core$IFn$_invoke$arity$2((function (p1__58753_SHARP_){
return cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2(p1__58753_SHARP_,current);
}),cljs.core.cycle(levels)));
return cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(db,new cljs.core.Keyword(null,"brightness","brightness",1067055820),(function (){var or__5002__auto__ = next;
if(cljs.core.truth_(or__5002__auto__)){
return or__5002__auto__;
} else {
return (25);
}
})());
})], null),new cljs.core.Keyword(null,"transitions","transitions",-2046216121),cljs.core.PersistentArrayMap.createAsIfByAssoc([new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("lighting","manual","lighting/manual",985253396),new cljs.core.Keyword(null,"switch-to-motion","switch-to-motion",78251000)], null),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"target","target",253001721),new cljs.core.Keyword("lighting","motion-sensing","lighting/motion-sensing",-1810206076)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("lighting","motion-sensing","lighting/motion-sensing",-1810206076),new cljs.core.Keyword(null,"switch-to-manual","switch-to-manual",-1952921967)], null),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"target","target",253001721),new cljs.core.Keyword("lighting","manual","lighting/manual",985253396)], null)]),new cljs.core.Keyword(null,"start-state","start-state",2056408421),new cljs.core.Keyword("lighting","manual","lighting/manual",985253396),new cljs.core.Keyword(null,"states","states",1389013542),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("lighting","manual","lighting/manual",985253396),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"components","components",-1073188942),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"manual","manual",-237370608)], null)], null),new cljs.core.Keyword("lighting","motion-sensing","lighting/motion-sensing",-1810206076),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"components","components",-1073188942),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"motion","motion",36831425)], null)], null)], null)], null);
}
if((typeof lightingsystem !== 'undefined') && (typeof lightingsystem.statechart !== 'undefined') && (typeof lightingsystem.statechart.app !== 'undefined') && (typeof lightingsystem.statechart.app.manual !== 'undefined')){
} else {
lightingsystem.statechart.app.manual = new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"transitions","transitions",-2046216121),cljs.core.PersistentArrayMap.createAsIfByAssoc([new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("manual","off","manual/off",-473135853),new cljs.core.Keyword(null,"toggle","toggle",1291842030)], null),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"target","target",253001721),new cljs.core.Keyword("manual","on","manual/on",-891157806)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("manual","on","manual/on",-891157806),new cljs.core.Keyword(null,"toggle","toggle",1291842030)], null),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"target","target",253001721),new cljs.core.Keyword("manual","off","manual/off",-473135853)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("manual","on","manual/on",-891157806),new cljs.core.Keyword(null,"change-brightness","change-brightness",169006747)], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"target","target",253001721),new cljs.core.Keyword(null,"internal","internal",-854870097),new cljs.core.Keyword(null,"actions","actions",-812656882),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"cycle-brightness","cycle-brightness",-38922817)], null)], null)], null)]),new cljs.core.Keyword(null,"start-state","start-state",2056408421),new cljs.core.Keyword("manual","off","manual/off",-473135853),new cljs.core.Keyword(null,"states","states",1389013542),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("manual","off","manual/off",-473135853),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"entry-actions","entry-actions",493602529),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"light-off","light-off",514870178)], null)], null)], null),new cljs.core.Keyword("manual","on","manual/on",-891157806),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"entry-actions","entry-actions",493602529),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"light-on","light-on",1530152303)], null)], null)], null)], null)], null);
}
if((typeof lightingsystem !== 'undefined') && (typeof lightingsystem.statechart !== 'undefined') && (typeof lightingsystem.statechart.app !== 'undefined') && (typeof lightingsystem.statechart.app.motion !== 'undefined')){
} else {
lightingsystem.statechart.app.motion = new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"actions","actions",-812656882),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"motion-light-on","motion-light-on",-1498087576),(function (db){
return cljs.core.assoc.cljs$core$IFn$_invoke$arity$variadic(db,new cljs.core.Keyword(null,"light","light",1918998747),new cljs.core.Keyword(null,"on","on",173873944),cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(null,"brightness","brightness",1067055820),(80)], 0));
}),new cljs.core.Keyword(null,"start-motion-timer","start-motion-timer",675659976),(function (db){
var id = setTimeout((function (){
return nodename.stately.core.dispatch_transition(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"timer-expired","timer-expired",95533604)], null));
}),(5000));
return cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(db,new cljs.core.Keyword(null,"motion-timer-id","motion-timer-id",-781705791),id);
}),new cljs.core.Keyword(null,"cancel-motion-timer","cancel-motion-timer",1416052289),(function (db){
clearTimeout(new cljs.core.Keyword(null,"motion-timer-id","motion-timer-id",-781705791).cljs$core$IFn$_invoke$arity$1(db));

return cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(db,new cljs.core.Keyword(null,"motion-timer-id","motion-timer-id",-781705791));
})], null),new cljs.core.Keyword(null,"transitions","transitions",-2046216121),cljs.core.PersistentArrayMap.createAsIfByAssoc([new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("motion","idle","motion/idle",1219426105),new cljs.core.Keyword(null,"motion-detected","motion-detected",1127054770)], null),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"target","target",253001721),new cljs.core.Keyword("motion","active","motion/active",815715838)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("motion","active","motion/active",815715838),new cljs.core.Keyword(null,"timer-expired","timer-expired",95533604)], null),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"target","target",253001721),new cljs.core.Keyword("motion","idle","motion/idle",1219426105)], null)]),new cljs.core.Keyword(null,"start-state","start-state",2056408421),new cljs.core.Keyword("motion","idle","motion/idle",1219426105),new cljs.core.Keyword(null,"states","states",1389013542),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("motion","idle","motion/idle",1219426105),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"entry-actions","entry-actions",493602529),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"light-off","light-off",514870178)], null)], null)], null),new cljs.core.Keyword("motion","active","motion/active",815715838),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"entry-actions","entry-actions",493602529),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"motion-light-on","motion-light-on",-1498087576)], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"start-motion-timer","start-motion-timer",675659976)], null)], null),new cljs.core.Keyword(null,"exit-actions","exit-actions",1787573758),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"cancel-motion-timer","cancel-motion-timer",1416052289)], null)], null)], null)], null)], null);
}

//# sourceMappingURL=lightingsystem.statechart.app.js.map
