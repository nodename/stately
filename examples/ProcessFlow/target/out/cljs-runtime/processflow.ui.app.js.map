{"version":3,"sources":["processflow/ui/app.cljs"],"mappings":";AAQA,2DAAA,3DAACA,oLAAuB,WAAKC,GAAGC;AAAR,AAAW,OAAA,qGAAgBD;;AACnD,2DAAA,3DAACD,iLAAuB,WAAKC,GAAGC;AAAR,AAAW,OAAA,kGAAcD;;AAEjD,wCAAA,2CAAA,2DAAA,WAAA,oEAAA,MAAA,yDAAA,UAAA,gEAAA,tWAAKE;AAML,gCAAA,hCAAMC;AAAN,AAEE,IAAMC,SAAY,sDAAA,mFAAA,zIAACC;IACbC,cAAY,sDAAA,mFAAA,zIAACD;AADnB,AAEE;AAAA,AAEE,IAAME,oBAAY,0BAAA,AAAAC,wBAAA,lDAACC,0CAAWL;AAA9B,AAAA,0FAAA,mDAAA,2CAAA,uDAAA,2CAAA,mEAAA,aAAA,gEAAA,QAAA,yDAAA,YAAA,iEAAA,yBAAA,mFAAA,kDAAA,uBAAA,mFAAA,mDAAA,2CAAA,uDAAA,2CAAA,gEAAA,OAAA,mEAAA,OAAA,yDAAA,aAAA,uDAAA,uBAAA,iBAAA,mFAAA,mDAAA,2CAAA,uDAAA,2CAAA,gEAAA,OAAA,mEAAA,OAAA,sEAAA,OAAA,sKAAA,mFAAA,yDAAA,2CAAA,uDAAA,2CAAA,gEAAA,OAAA,2DAAA,YAAA,mGAAA,sEAAA,MAAA,yDAAA,OAAA,qGAAA,uDAAA,gBAAA,gFAAA,6DAAA,9jCAgBiC,qBAAA,UAAA,7BAAIG,wDACjC,qBAAA,gBAAA,nCAAIA,mhBAI+B,qBAAA,UAAA,7BAAIA,qPAGJ,qBAAA,OAAA,1BAAIA,uKAEpBA;AA1BvB,AA2BwB,iDAAA,mFAAA,7HAACG;WA3BzB,29BAAA,mFAAA,mDAAA,2CAAA,uDAAA,2CAAA,gEAAA,uBAAA,mFAAA,yDAAA,2CAAA,6FAAA,6DAAA,3nDA8BG,kBAAA,AAAAF,8BAAA,AAAA,mFAAA,mDAAA,2CAAA,uDAAA,2CAAA,gEAAA,OAAA,2DAAA,YAAA,iEAAA,UAAA,yDAAA,iBAAA,sEAAA,MAAA,gEAAA,OAAA,uDAAA,0IAAA,x5BAAOF,wyBAQJ,CAAA,+DAAA,AAAAE,gBAAyBF,8nBAGVJ;AAzCrB,AA0CyB,OAACS,iDAAO,AAACC;WA1ClC,qBAAA,mFAAA,yDAAA,2CAAA,6FAAA,6DAAA,nGA4CqBV;AA5CrB,AA6CyB,OAACS,iDAAO,sDAAA,AAAAH,+CAAA,uGAAA,uEAAA,nRAACK,sEAAQC;WA7C1C,aAAA,mFAAA,yDAAA,2CAAA,6FAAA,kGAAA,xIA+CqBZ,mGACGa","names":["re_frame.core.reg_sub","db","_","processflow.ui.app/small-button-style","processflow.ui.app/app-screen","active","re_frame.core.subscribe","last-signal","processing?","cljs.core/deref","cljs.core/contains?","nodename.stately.core/dispatch-transition","cljs.pprint.pprint","nodename.stately.tree/tree","cljs.core.dissoc","nodename.stately.comms/app-db","cljs.user/show-active-states"],"sourcesContent":["(ns processflow.ui.app\n  (:require [cljs.pprint :refer [pprint]]\n            [re-frame.core :refer [reg-sub subscribe]]\n            [nodename.stately.comms :refer [app-db]]\n            [nodename.stately.core :refer [dispatch-transition]]\n            [nodename.stately.tree :refer [tree]]\n            [cljs.user :refer [show-active-states]]))\n\n(reg-sub :active-states (fn [db _] (:active-states db)))\n(reg-sub :last-signal   (fn [db _] (:last-signal db)))\n\n(def small-button-style\n  {:padding      \"4px 10px\"\n   :margin-right \"6px\"\n   :cursor       \"pointer\"\n   :font-size    \"12px\"})\n\n(defn app-screen\n  []\n  (let [active      (subscribe [:active-states])\n        last-signal (subscribe [:last-signal])]\n    (fn\n      []\n      (let [processing? (contains? @active :process/processing)]\n        [:div {:style {:font-family \"sans-serif\"\n                       :max-width   \"320px\"\n                       :margin      \"60px auto\"\n                       :text-align  \"center\"}}\n         [:h1 \"Process Flow\"]\n\n         [:div {:style {:font-size     \"18px\"\n                        :font-weight   \"bold\"\n                        :margin        \"20px 0 8px\"\n                        :color         \"#333\"}}\n          \"State:\"]\n\n         [:div {:style {:font-size     \"28px\"\n                        :font-weight   \"bold\"\n                        :margin-bottom \"28px\"\n                        :color         (if processing? \"#e07b00\" \"#2a7a2a\")}}\n          (if processing? \"Processing...\" \"Idle\")]\n\n         [:button {:style    {:font-size     \"16px\"\n                              :padding       \"10px 24px\"\n                              :cursor        (if processing? \"default\" \"pointer\")\n                              :border-radius \"6px\"\n                              :border        \"none\"\n                              :background    (if processing? \"#ccc\" \"#444\")\n                              :color         \"white\"}\n                   :disabled processing?\n                   :on-click #(dispatch-transition [:start-processing])}\n          \"Start Processing\"]\n\n         (when @last-signal\n           [:div {:style {:margin-top  \"28px\"\n                          :padding     \"10px 16px\"\n                          :background  \"#eaffea\"\n                          :border      \"1px solid #6c6\"\n                          :border-radius \"6px\"\n                          :font-size   \"14px\"\n                          :color       \"#2a7a2a\"}}\n            (str \"Outgoing event: \" @last-signal)])\n\n         [:div {:style {:margin-top \"20px\"}}\n          [:button {:style small-button-style\n                    :on-click #(pprint (tree))}\n           \"statechart\"]\n          [:button {:style small-button-style\n                    :on-click #(pprint (dissoc @app-db :tree :active-states :parents))}\n           \"db\"]\n          [:button {:style small-button-style\n                    :on-click show-active-states}\n           \"active states\"]]]))))\n"]}